
###
# jsom 3.x documentation: http://bit.ly/1OROksU
###

# dependencies
expect = require 'expect.js'
fs = require 'fs'
jsdom = require 'jsdom'

# locals
typeOf = null
window = null

# tests
describe 'typeOf', ->

  # setup jsdom
  before (done) ->
    jsdom.env {
      html: '<html><body><div id="test"></div></body></html>'
      src: [
        fs.readFileSync './build/typeof.js', 'utf-8'
      ]
      done: (err, _window) ->
        window = _window
        typeOf = window.typeOf
        jsdom.getVirtualConsole(window).sendTo console
        done()
  }

  it 'is defined', ->
    expect(typeOf).to.be.ok()

  it 'can detect undefined', ->
    expect(typeOf()).to.equal 'undefined'

  it 'can detect null', ->
    expect(typeOf null).to.equal 'null'

  it 'can detect dom elements', ->
    el = window.document.getElementById 'test'
    expect(typeOf el).to.equal 'element'

  it 'can detect arrays', ->
    expect(typeOf []).to.equal 'array'
    expect(typeOf new Array()).to.equal 'array'

  it 'can detect arguments', ->
    expect(typeOf arguments).to.equal 'arguments'

  it 'can detect dates', ->
    expect(typeOf new Date()).to.equal 'date'

  it 'can detect errors', ->
    expect(typeOf new Error()).to.equal 'error'

  it 'can detect functions', ->
    expect(typeOf ->).to.equal 'function'

  it 'can detect numbers', ->
    expect(typeOf Number(10)).to.equal 'number'
    expect(typeOf 10).to.equal 'number'

  it 'can detect regular expressions', ->
    expect(typeOf new RegExp('x')).to.equal 'regexp'
    expect(typeOf /x/).to.equal 'regexp'

  it 'can detect strings', ->
    expect(typeOf new String('x')).to.equal 'string'
    expect(typeOf 'x').to.equal 'string'
