
window.typeOf = (obj) ->

  # http://underscorejs.org/docs/underscore.html#section-147
  if obj is null then return 'null'

  # http://underscorejs.org/docs/underscore.html#section-148
  if obj is undefined then return 'undefined'

  # http://underscorejs.org/docs/underscore.html#section-138
  if obj.nodeType is 1 then return 'element'

  # http://underscorejs.org/docs/underscore.html#section-139
  if Array.isArray obj then return 'array'

  # http://underscorejs.org/docs/underscore.html#section-141
  switch Object.prototype.toString.call obj
    when '[object Arguments]' then return 'arguments'
    when '[object Array]' then return 'array'
    when '[object Date]' then return 'date'
    when '[object Error]' then return 'error'
    when '[object Function]' then return 'function'
    when '[object Number]' then return 'number'
    when '[object RegExp]' then return 'regexp'
    when '[object String]' then return 'string'

  # http://underscorejs.org/docs/underscore.html#section-142
  if arguments.toString() isnt '[object Arguments]'
    if obj.hasOwnProperty 'callee'
      return 'arguments'

  # catch all
  return typeof obj
